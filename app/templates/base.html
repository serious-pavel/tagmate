<!DOCTYPE html>
{% load static %}

<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="{% static 'img/hashtag-square-svgrepo-com.svg' %}" sizes="any">
  <link rel="stylesheet" href="{% static 'css/general_style.css' %}">
  <link rel="stylesheet" href="{% static 'css/custom_style.css' %}">
  <link rel="stylesheet" href="{% static 'css/messaging_style.css' %}">
  <link rel="stylesheet" href="{% static 'css/buttons_style.css' %}">
  <link rel="stylesheet" href="{% static 'css/modal_window_style.css' %}">
  {% block links %}
  {% endblock links %}
  <script>{% block script %}{% endblock script %}</script>
  <script src="{% static 'js/show_messages.js' %}"></script>
  <script src="{% static 'js/show_resolution.js' %}"></script>
  <script src="{% static 'js/toggle_theme.js' %}"></script>
  <script src="{% static 'js/foolproof_deletion.js' %}"></script>
  <script src="{% static 'js/modal_window_interactions.js' %}"></script>
  {% block scripts %}
  {% endblock scripts %}
  <title>TagMate - {% block title %}{% endblock title %}</title>
</head>
<body>
<script>
  (function () {
    var tab = localStorage.getItem('blockL_selected_tab') || 'posts';
    document.body.classList.add(tab === 'tgs' ? 'blockL-show-tgs' : 'blockL-show-posts');
  })();
</script>
<div class="header">
  <div class="header-left">
    {% with request.resolver_match.url_name as url_name %}
      <a href="/" class="header-logo"><img src="{% static 'img/hashtag-square-svgrepo-com.svg' %}" height="35" alt=""
                                           loading="lazy"></a>
      <a href="{% url 'index' %}" class="{% if url_name in 'index post_editor post_tg_editor' %}nav-active{% endif %}">Post
        Editor</a>
      {% if user.is_authenticated %}
        <a href="{% url 'profile' %}" class="{% if url_name == 'profile' %}nav-active{% endif %}">Profile</a>
      {% endif %}
    {% endwith %}
  </div>
  TagMate
  <div class="header-right">
    <div class="theme-toggle">
      <button id="theme-toggle-btn" aria-label="Toggle theme">
        <span id="theme-label">ðŸŒž</span>
      </button>
    </div>
    {% block header-filter %}
      <a href="https://github.com/serious-pavel/personal_site"><img src="{% static 'img/github-142-svgrepo-com.svg' %}"
                                                                    alt=""></a>
      <a href="https://www.linkedin.com/in/pavel-makhnev/"><img src="{% static 'img/linkedin-fill-svgrepo-com.svg' %}"
                                                                alt=""></a>
    <span id="resolutionWidget" style="font-size: small; color: #888;"></span>
    {% endblock %}
  </div>
</div>
<div class="content-main">
  <div class="content-nested">
    <div class="message-area">
      {% if messages %}
        {% for message in messages %}
          <div class="message {{ message.tags }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    </div>
      <div id="delete-modal-bg" class="modal-bg" style="display:none;">
      <div class="modal-window">
        <div class="highlighted-text modal-window-header" id="delete-item-name">Delete item</div>
        <div id="delete-modal-text" class="modal-window-body">Are you sure you want to delete this item?</div>
        <div>
          <button id="confirm-delete-btn" class="highlighted">Yes, Delete</button>
          <button id="cancel-delete-btn">Cancel</button>
        </div>
      </div>
    </div>

    <div id="generic-modal-bg" class="modal-bg" style="display:none;">
      <div class="modal-window">
        <div class="highlighted-text modal-window-header" id="generic-modal-text">Create item</div>
        <form method="post" class="create-item-form" id="create-item-form">
          {% csrf_token %}
          <input type="hidden" name="action" value="none">
          <label>
            <input type="text" name="new_item_name" placeholder="Title/Name (optional)"
                   class="edit-like-text modal-window-body" enterkeyhint="send">
          </label>
        </form>
        <div>
          <button type="submit" id="modal-confirm-btn" form="create-item-form" class="highlighted">Confirm</button>
          <button id="modal-cancel-btn">Cancel</button>
        </div>
      </div>
    </div>
    {% block content %}
    {% endblock content %}
  </div>
</div>
</body>
</html>